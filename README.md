# GitHub Secrets Detection and Security Gate Lab

This repository is designed as a **pedagogical lab** to demonstrate how GitHub and Gitleaks can be used to detect secrets and critical vulnerabilities in code. The lab covers the creation of code files, pipelines, and interpretation of scan reports.

---

## 1. Creation of a New Repository

- Create a new repository on GitHub for this lab.  
- Name it something meaningful like `gitleaks-security-lab`.  
- Initialize the repository with a README.md and choose the main branch.

---

## 2. Validation

- Ensure the repository has been created successfully.  
- Clone it locally to your development environment:  

```bash
git clone https://github.com/username/gitleaks-security-lab.git
cd gitleaks-security-lab
````

---

## 3. Creation of the File `app.py`

* Create a simple Python file `app.py` for testing purposes:

```python
# app.py
def main():
    print("This is a demo application.")

if __name__ == "__main__":
    main()
```

* Commit and push the file to the repository:

```bash
git add app.py
git commit -m "Add app.py demo file"
git push origin main
```

---

## 4. Creation of Pipeline 01: SECRETS Scan with Gitleaks

* Create a GitHub Actions workflow to scan for secrets using **Gitleaks**.
* Name the workflow file `.github/workflows/gitleaks-scan.yml`.
* Configure it to scan the repository on push or pull request events.

Example:

```yaml
# simplified example snippet
run: gitleaks detect --source . --report-format json --report-path gitleaks-report.json
```

---

## 5. Scan Report Pipeline 01: No Vulnerability Detected

* Run Pipeline 01.
* If no secrets are present in the repository, Gitleaks will report:

```
No findings in JSON report.
```

* Pipeline status will be **green**.

---

## 6. Download of the TXT File Generated by the Gitleaks Scanner

* Gitleaks can generate a **human-readable TXT report** from the JSON output.
* Download this TXT file from the GitHub Actions artifacts.

---

## 7. Interpretation of the TXT File via ChatGPT with Report Sent to Supervisors

* Open the TXT report.
* Use **ChatGPT** to interpret the results and summarize:

  * If **no leaks detected**, confirm repository security.
  * Send the summary report to supervisors for review.

---

## 8. Creation of the File `config-demo.py`

* Create a new Python file `config-demo.py` containing a **demo secret**:

```python
# config-demo.py
API_KEY = "SECRET_1234567890"
DB_PASSWORD = "SECRET_MYDBPASS"
```

* Commit and push to the repository:

```bash
git add config-demo.py
git commit -m "Add demo secret for security lab"
git push origin main
```

---

## 9. GitHub Detects the Secret in the File and Issues a Warning

* Gitleaks will scan the repository automatically.
* It detects the secret in `config-demo.py` and issues a **warning** in the logs.
* At this point, Pipeline 01 may still show green if it is only scanning, depending on configuration.

---

## 10. Creation of Pipeline 02: Security Gate

* Create a new GitHub Actions workflow `.github/workflows/security-gate.yml`.
* Configure it to **fail the pipeline** if a critical secret is detected.
* Include generation of **JSON and TXT reports** for analysis.

---

## 11. Pipeline 02 Displays Red Following the Detection of a Critical Vulnerability

* Push the repository with the secret file.
* The Security Gate pipeline detects the secret and returns **exit code 1**.
* GitHub Actions shows the job as **red**, indicating a critical vulnerability.

---

## 12. Interpretation of the TXT File via ChatGPT with Report Sent to Supervisors

* Download the human-readable TXT report from the Security Gate workflow.
* Analyze the leaks detected in `config-demo.py` using ChatGPT.
* Summarize the findings and send the report to supervisors.

**Key teaching points:**

* How secret detection works in GitHub repositories.
* Difference between a **normal scan** (Pipeline 01, green if no secret) and a **Security Gate** (Pipeline 02, red if secret detected).
* How to interpret scan reports and communicate findings.

---

### Lab Outcome

After completing this lab, students should be able to:

* Create a repository with demo code and secrets.
* Configure GitHub Actions pipelines for secret scanning.
* Generate and interpret reports from Gitleaks.
* Understand how critical vulnerabilities trigger a security gate failure.

```

